<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
	<th:block th:include="include :: header('新增用户')" />
	<th:block th:include="include :: datetimepicker-css" />
</head>
<body>
	<div class="form-content">
		<form id="form-user-add" class="form-horizontal">
			<input name="deptId" type="hidden" id="treeId"/>
			<h4 class="form-header h4">基本信息</h4>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>登录账号：</label>
						<div class="col-sm-8">
							<input id="loginName" name="loginName" autocomplete="off" placeholder="请输入登录账号" class="form-control" type="text" maxlength="30" required>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>登录密码：</label>
						<div class="col-sm-8">
							<input name="password" placeholder="请输入登录密码" autocomplete="off" class="form-control" type="password" th:value="${@config.getKey('sys.user.initPassword')}" required>
						</div>
					</div>

				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>手机号码：</label>
						<div class="col-sm-8">
							<input id="phonenumber" name="phonenumber" autocomplete="off" placeholder="请输入手机号码" class="form-control" type="text" maxlength="11" required>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>邮箱：</label>
						<div class="col-sm-8">
							<input id="email" name="email" autocomplete="off" class="form-control email" type="text" maxlength="50" placeholder="请输入邮箱">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>用户昵称：</label>
						<div class="col-sm-8">
							<input id="userName" name="userName" autocomplete="off" placeholder="请输入用户昵称" class="form-control" type="text" maxlength="30">
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label">用户性别：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select name="sex" class="form-control m-b" th:with="type=${@dict.getType('sys_user_sex')}">
									<option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>生日：</label>
						<div class="col-sm-8">
							<div class="input-group date" style="width: 100%"> <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
								<input type="text" class="form-control  m-b" placeholder="点击选择生日">
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label">用户状态：</label>
						<div class="col-sm-8">
							<div class="onoffswitch">
								<input type="checkbox" th:checked="true" class="onoffswitch-checkbox" id="status">
								<label class="onoffswitch-label" for="status">
									<span class="onoffswitch-inner"></span>
									<span class="onoffswitch-switch"></span>
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-xs-4 control-label">公司：</label>
						<div class="col-xs-8">
							<div class="input-group" style="width: 100%">
								<select  id="orgId" name="orgId" class="form-control select2-hidden-accessible">
									<option th:each="org:${orgList}" th:value="${org.id}" th:text="${org.name}" ></option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-sm-4 control-label"><span style="color: red; ">*</span>所属地区：</label>
						<div class="col-sm-8">
							<div class="input-group" style="width: 100%">
								<select  id="sDepId" name="sDepId" class="form-control select2-hidden-accessible">
									<option th:each="org:${orgList}" th:value="${org.id}" th:text="${org.name}" ></option>
								</select>
							</div>
						</div>
					</div>

				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-xs-4 control-label">用户头像：</label>
						<div class="col-xs-8">
							<div class="input-group" style="width: 100%">
								<input id="avatar" name="avatar" autocomplete="off" placeholder="点击选择头像" class="form-control" type="text">
							</div>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="form-group">
						<label class="col-xs-4 control-label">联系地址：</label>
						<div class="col-xs-8">
							<div class="input-group" style="width: 100%">
								<textarea id="address" name="address" autocomplete="off" maxlength="500" class="form-control" rows="3"></textarea>
							</div>
						</div>
					</div>
				</div>
			</div>
			<h4 class="form-header h4">其他信息</h4>
			<div class="row">
				<div class="col-sm-12">
					<div class="form-group">
						<label class="col-xs-2 control-label">备注：</label>
						<div class="col-xs-10">
							<textarea name="remark" autocomplete="off" maxlength="500" class="form-control" rows="3"></textarea>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="row">
		<div class="col-sm-offset-5 col-sm-10">
			<button type="button" class="btn btn-sm btn-primary" onclick="submitHandler()"><i class="fa fa-check"></i>保 存</button>&nbsp;
			<button type="button" class="btn btn-sm btn-danger" onclick="closeItem()"><i class="fa fa-reply-all"></i>关 闭 </button>
		</div>
	</div>

	<div th:include="include::footer"></div>
	<th:block th:include="include :: datetimepicker-js" />
    <script type="text/javascript">
		var prefix = ctx + "cms/user"
        $(".input-group.date").datetimepicker({
            format: "yyyy-mm-dd",
            minView: "month",
            autoclose: true
        });

        $("#form-user-add").validate({
			rules:{
                loginName:{
                    minlength: 4,
                    maxlength: 11
                },
                password:{
                    minlength: 5,
                    maxlength: 20
                },
                phonenumber:{
                    isPhone:true,
                    remote: {
                        url: ctx + "cms/user/checkPhoneUnique",
                        type: "post",
                        dataType: "json",
                        dataFilter: function (data, type) {
                            return $.validate.unique(data);
                        }
                    }
                },
			},
			focusCleanup: true
		});
		
		function submitHandler() {
	        if ($.validate.form()) {
	            $.operate.save(prefix + "/add", $('#form-user-add').serialize());
	        }
	    }
	</script>
</body>
</html>
